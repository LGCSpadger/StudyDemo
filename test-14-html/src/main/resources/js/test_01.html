<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>菜鸟教程(runoob.com)</title>
  <script>
    let websocket = null;

    if ('WebSocket' in window) {
      websocket = new WebSocket('ws://localhost:8019/websocket/cli-1');

      websocket.onopen = function () {
        console.log('连接成功');
      };
      websocket.onclose = function () {
        console.log('退出连接');
      };
      websocket.onmessage = function (event) {
        console.log('收到消息：' + event.data);
      };
      websocket.onerror = function () {
        console.log('连接出错');
      };

      // MDN Example
      websocket.addEventListener('open', function (event) {
        websocket.send('Hello Server!');
      });
      websocket.addEventListener('message', function (event) {
        console.log('Message from server ', event.data);
      });
      websocket.addEventListener('error', function (event) {
        console.log('WebScoket error: ', event);
      });
    }

    window.onbeforeunload = function () {
      // 页面关闭时关闭WebSocket连接
      websocket.close(1000);
    };
  </script>
</head>
<body>


</body>
</html>